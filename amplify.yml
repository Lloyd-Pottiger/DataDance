version: 1
env:
  variables:
    VITE_API_BASE_URL: https://api.datadance.fun/api
frontend:
  phases:
    preBuild:
      commands:
        - yum install -y java-1.8.0-openjdk
        - cd backend
        - yarn
        - yarn build
        - cd ../ui
        - yarn
        - yarn gen:client
    build:
      commands:
        - yarn build
  artifacts:
    baseDirectory: ./ui/dist
    files:
      - "**/*"
  cache:
    paths:
      - backend/node_modules/**/*
      - ui/node_modules/**/*
